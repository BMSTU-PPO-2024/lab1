openapi: 3.0.3

info:
  version: 1.0.0
  title: API для работы с записью на курс.

paths:
  /users/{userId}:
    get:
      tags:
        - User
      summary: Получение пользователя по id
      parameters:
        - name: userId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  permissions:
                    type: integer
                  created:
                    type: string
                  nickname:
                    type: string
                  about:
                    type: string
                  id:
                    type: string
                  banned:
                    type: boolean
                  avatar:
                    type: string
                  updated:
                    type: string
                  email:
                    type: string
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    patch:
      summary: Частичное обновление полей пользователя
      tags:
        - User
      parameters:
        - name: userId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                nickname:
                  type: string
                about:
                  type: string
                avatar:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа
        "400":
          description: Передан пустой объект для апдейта

  /comments/{commentId}:
    get:
      summary: Получение комментария по id
      tags:
        - Comment
      parameters:
        - name: commentId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    delete:
      summary: Удаление комментария по id
      tags:
        - Comment
      parameters:
        - name: commentId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    patch:
      summary: Частичное обновление полей комментария
      tags:
        - Comment
      parameters:
        - name: commentId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /posts/{postId}:
    get:
      summary: Получение поста по id
      tags:
        - Post
      parameters:
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    delete:
      summary: Удаление поста по id
      tags:
        - Post
      parameters:
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
    patch:
      summary: Частичное обновление полей поста по id
      tags:
        - Post
      parameters:
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                visible:
                  type: boolean
                tagIds:
                  type: array
                  items:
                    type: string
                text:
                  type: string
                title:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "400":
          description: Передан пустой объект для апдейта
  /login:
    post:
      summary: Логин
      tags:
        - Auth
      parameters: []
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                email:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Пользователь не найден
        "403":
          description: Пользователь забанен
        "401":
          description: Пользователь не авторизован

  /feeds/{feedId}/posts:
    get:
      summary: Получение постов в ленте
      tags:
        - Feed
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: feedId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /comments/{commentId}/rate:
    post:
      summary: Лайкнуть комментарий
      tags:
        - Comment
      parameters:
        - name: commentId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    delete:
      summary: Убрать лайк у комментария
      tags:
        - Comment
      parameters:
        - name: commentId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
  /users/{userId}/feeds:
    get:
      summary: Получение лент пользователя
      tags:
        - User
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: userId
          in: path
          description: description
          required: true
          schema:
            type: string
        - name: pattern
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: name
          in: query
          description: description
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /posts/{postId}/comments:
    get:
      summary: Получение комментариев к посту
      tags:
        - Post
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /posts/{postId}/rate:
    post:
      summary: Лайкнуть пост
      tags:
        - Post
      parameters:
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    delete:
      summary: Убрать лайк с поста
      tags:
        - Post
      parameters:
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /feeds/{feedId}:
    get:
      summary: Получить ленту по id
      tags:
        - Feed
      parameters:
        - name: feedId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    delete:
      summary: Удалить ленту по id
      tags:
        - Feed
      parameters:
        - name: feedId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    patch:
      summary: Обновить ленту по id
      tags:
        - Feed
      parameters:
        - name: feedId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                visible:
                  type: boolean
                tagIds:
                  type: array
                  items:
                    type: string
                name:
                  type: string
                channelIds:
                  type: array
                  items:
                    type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа
        "400":
          description: Какие то из каналов ленты скрыты
  /feeds:
    get:
      summary: Поиск по лентам
      tags:
        - Feed
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: name
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: pattern
          in: query
          description: description
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Success
    post:
      summary: Создать ленту
      tags:
        - Feed
      parameters: []
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                visible:
                  type: boolean
                tagIds:
                  type: array
                  items:
                    type: string
                name:
                  type: string
                channelIds:
                  type: array
                  items:
                    type: string
        required: true
      responses:
        "200":
          description: Success
        "400":
          description: Какие то из каналов ленты скрыты
  /channels/{channelId}/post:
    post:
      summary: Создать пост в канале
      tags:
        - Channel
      parameters:
        - name: channelId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                visible:
                  type: boolean
                tagIds:
                  type: array
                  items:
                    type: string
                text:
                  type: string
                title:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /tags/{tagId}:
    get:
      summary: Получить тег по id
      tags:
        - Tag
      parameters:
        - name: tagId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    delete:
      summary: Удаление тега по id
      tags:
        - Tag
      parameters:
        - name: tagId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

    patch:
      summary: Частичное обновление полей тега
      tags:
        - Tag
      parameters:
        - name: tagId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /channels/{channelId}/posts:
    get:
      summary: Получение постов в канале
      tags:
        - Channel
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: channelId
          in: path
          description: description
          required: true
          schema:
            type: string
        - name: title
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: pattern
          in: query
          description: description
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /channels:
    get:
      summary: Поиск по каналам
      tags:
        - Channel
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: name
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: pattern
          in: query
          description: description
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Success
    post:
      summary: Создать канал
      tags:
        - Channel
      parameters: []
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                visible:
                  type: boolean
                name:
                  type: string
        required: true
      responses:
        "200":
          description: Success
  /posts/{postId}/comment:
    post:
      summary: Создать комментарий к посту
      tags:
        - Post
      parameters:
        - name: postId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /users:
    get:
      summary: Получить информацию о себе
      tags:
        - User
      parameters: []
      responses:
        "200":
          description: Success
    patch:
      summary: Частичное обновление информации о себе
      tags:
        - User
      parameters: []
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                nickname:
                  type: string
                about:
                  type: string
                avatar:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "400":
          description: Передан пустой объект для апдейта
  /tags:
    get:
      summary: Поиск по тегам
      tags:
        - Tag
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: name
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: pattern
          in: query
          description: description
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Success
    post:
      summary: Создание тега
      tags:
        - Tag
      parameters: []
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "409":
          description: Тег с таким именем уже существуе
  /users/{userId}/channels:
    get:
      summary: Поиск по каналам пользователя
      tags:
        - User
      parameters:
        - name: page
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: batch
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: userId
          in: path
          description: description
          required: true
          schema:
            type: string
        - name: pattern
          in: query
          description: description
          required: false
          schema:
            type: string
        - name: name
          in: query
          description: description
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа

  /register:
    post:
      summary: Регистрация
      tags:
        - Auth
      parameters: []
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                email:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "409":
          description: Пользователь с таким email уже существует
  /channels/{channelId}:
    get:
      summary: Получение канала по id
      tags:
        - Channel
      parameters:
        - name: channelId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа
    delete:
      summary: Удаление канала по id
      tags:
        - Channel
      parameters:
        - name: channelId
          in: path
          description: description
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа
    patch:
      summary: Частичное обновление полей канала
      tags:
        - Channel
      parameters:
        - name: channelId
          in: path
          description: description
          required: true
          schema:
            type: string
      requestBody:
        description: description
        content:
          application/json:
            schema:
              type: object
              properties:
                visible:
                  type: boolean
                name:
                  type: string
        required: true
      responses:
        "200":
          description: Success
        "404":
          description: Не найдено
        "403":
          description: Нет доступа
        "400":
          description: Не указано name и visible

